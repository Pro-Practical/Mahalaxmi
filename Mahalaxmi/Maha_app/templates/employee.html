{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Woody - Carpenter Website Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="{% static 'img/favicon.ico' %}" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500&family=Roboto:wght@500;700;900&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/lightbox/css/lightbox.min.css' %}" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

    <style>
        body {
    margin: 0;
    padding: 0;
    background: url('{% static "img/background1.jpg" %}') no-repeat center center fixed;
    background-size: cover;
    height: 100vh;
}
        .stats-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 20px;
            margin-top: 20px;
        }

        .stat-box {
            background-color: #c0e0c7;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 30%;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-box:hover {
            transform: translateY(-10px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .stat-box i {
            font-size: 40px;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .stat-box h3 {
            font-size: 24px;
            color: #34495e;
        }

        .stat-box p {
            font-size: 18px;
            color: #7f8c8d;
        }
    </style>

</head>

<body>
    {% include 'admin_nav.html' %}
    <div class="container mt-5">

    <div class="container-fluid full-height">
        <div class="form-container">
            <h2 class="text-center">Employee Registration</h2>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- Personal Details Section -->
                <div class="form-section">
                    <h4 class="mt-4">Personal Details</h4>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="fullname">Full Name</label>
                                <input type="text" class="form-control" id="fullname" name="fullname" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="gender">Gender</label>
                                <select class="form-control" id="gender" name="gender" required>
                                    <option value="">Select Gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="dob">Date of Birth</label>
                                <input type="date" class="form-control" id="dob" name="dob" required>
                            </div>
                        </div>
                       <!-- Contact Input Field -->
<div class="col-md-3">
    <div class="form-group">
        <label for="contact">Contact</label>
        <input type="text" class="form-control" id="contact" name="contact" required>
        <small id="contactError" class="form-text text-danger" style="display: none;">This contact number is already registered.</small>
    </div>
</div>


                    </div>
                </div>

                <!-- Nationality, City, State, and Pincode -->
                <div class="form-section">
                    <div class="row">

                            <div class="col-md-3">
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="text" class="form-control" id="email" name="email" required>
                            </div>

                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="text" class="form-control" id="password" name="password" required>
                            </div>

                            <div class="form-group">
                                <label for="nationality">Nationality</label>
                                <input type="text" class="form-control" id="nationality" name="nationality" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="city">City</label>
                                <input type="text" class="form-control" id="city" name="city" required>
                            </div>
                        </div>
                         <div class="col-md-3">
                            <div class="form-group">
                                <label for="Taluk">Taluk</label>
                                <input type="text" class="form-control" id="Taluk" name="Taluk" required>
                            </div>
                        </div>
                         <div class="col-md-3">
                            <div class="form-group">
                                <label for="district">District</label>
                                <input type="text" class="form-control" id="district" name="district" required>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="state">State</label>
                                <input type="text" class="form-control" id="state" name="state" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="pincode">Pincode</label>
                                <input type="text" class="form-control" id="pincode" name="pincode" required>
                            </div>
                        </div>
                         <div class="col-md-3">
                            <div class="form-group">
                                <label for="adhar">Adhar</label>
                                <input type="text" class="form-control" id="adhar" name="adhar" required>
                            </div>
                        </div>
                         <div class="col-md-3">
                            <div class="form-group">
                                <label for="pancard">pancard</label>
                                <input type="text" class="form-control" id="pancard" name="pancard" required>
                            </div>
                        </div>
                         <div class="col-md-3">
            <div class="form-group">
                <label for="photo">Upload Photo</label>
                <input type="file" class="form-control-file" id="photo" name="photo" required>
            </div>
        </div>
                    </div>
                </div>

                <!-- Family Details Section -->
                <div class="form-section">
                    <h4 class="mt-4">Family Details</h4>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="fathername">Father's Name</label>
                                <input type="text" class="form-control" id="fathername" name="fathername" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="mothername">Mother's Name</label>
                                <input type="text" class="form-control" id="mothername" name="mothername" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="mobile">Family Contact</label>
                                <input type="text" class="form-control" id="mobile" name="mobile" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="occupation">Occupation</label>
                                <input type="text" class="form-control" id="occupation" name="occupation" required>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Education Details Section -->
                <!-- Education Details Section -->
<div class="form-section">
    <h4 class="mt-4">Education Details</h4>
    <div class="row">
        <!-- 10th Passing Year and Percentage -->
        <div class="col-md-3">
            <div class="form-group">
                <div class="form-group">
                <label for="tenthpass">10th Passing year</label>
                <input type="text" class="form-control" id="tenthpass" name="tenthpass" required>
            </div>
            </div>
        </div>
        <div class="col-md-3">
           <div class="form-group">
                <label for="tenth_percentage">10th Percentage</label>
                <input type="text" class="form-control" id="tenth_percentage" name="tenth_percentage" required>
            </div>
        </div>

        <!-- 12th Passing Year and Percentage -->
        <div class="col-md-3">
            <div class="form-group">
                <label for="twelfth_pass">12th Passing Year</label>
                <input type="text" class="form-control" id="twelfth_pass" name="twelfth_pass" required>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="twelfth_percentage">12th Percentage</label>
                <input type="text" class="form-control" id="twelfth_percentage" name="twelfth_percentage" required>
            </div>
        </div>

         <div class="col-md-3">
             <div class="form-group">
                <label for="degree">Degree Name:</label>
                <input type="text" class="form-control" id="degree" name="degree" required>
            </div>
        </div>
        <!-- Degree Passing Year and Percentage -->
        <div class="col-md-3">
             <div class="form-group">
                <label for="degreepass">Degree Passing year</label>
                <input type="text" class="form-control" id="degreepass" name="degreepass" required>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="degree_percentage">Degree Percentage</label>
                <input type="text" class="form-control" id="degree_percentage" name="degree_percentage" required>
            </div>
        </div>
    </div>
</div>


                <!-- Work Experience Section -->
                <div class="form-section">
                    <h4 class="mt-4">Work Experience</h4>
                    <!-- Previous Company, Role, Salary, Start Date -->
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="previoucompany">Previous Company</label>
                                <input type="text" class="form-control" id="previoucompany" name="previoucompany">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="role">Role</label>
                                <input type="text" class="form-control" id="role" name="role">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="sallery">Salary</label>
                                <input type="text" class="form-control" id="sallery" name="sallery">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="start_date">Start Date</label>
                                <input type="date" class="form-control" id="start_date" name="start_date">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- End Date -->
                <div class="form-section">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="end_date">End Date</label>
                                <input type="date" class="form-control" id="end_date" name="end_date">
                            </div>
                        </div>
                    </div>
                </div>


                      <!-- Work Experience Section -->
                <div class="form-section">
                    <h4 class="mt-4">Job Description</h4>
                    <!-- Previous Company, Role, Salary, Start Date -->
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="jrole">Job role</label>
                                <input type="text" class="form-control" id="jrolr" name="jrole">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="doj">Date of joining</label>
                                <input type="date" class="form-control" id="doj" name="doj">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="pf">PF</label>
                                <input type="text" class="form-control" id="pf" name="pf">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="ESIC">ESIC</label>
                                <input type="text" class="form-control" id="ESIC" name="esic">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Inside your form, after the Family and Education Details sections -->
<!-- Bank Details Section -->
<div class="form-section">
    <h4 class="mt-4">Bank Details</h4>
    <div class="row">
        <div class="col-md-3">
            <div class="form-group">
                <label for="bank_name">Bank Name</label>
                <input type="text" class="form-control" id="bank_name" name="bank_name" placeholder="Enter Bank Name" required>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="bank_account_number">Account Number</label>
                <input type="text" class="form-control" id="bank_account_number" name="bank_account_number" placeholder="Enter Account Number" required>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="ifsc_code">IFSC Code</label>
                <input type="text" class="form-control" id="ifsc_code" name="ifsc_code" placeholder="Enter IFSC Code" required>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="account_holder_name">Account Holder Name</label>
                <input type="text" class="form-control" id="account_holder_name" name="account_holder_name" placeholder="Enter Account Holder Name" required>
            </div>
        </div>
    </div>
</div>

                <!-- End Date -->

                <!-- Documents Section -->
                <div class="form-section">
    <h4 class="mt-4">Documents</h4>
    <div class="row">
        <div class="col-md-3">
            <div class="form-group">
                <label for="adhar_doc">Aadhar Document</label>
                <input type="file" class="form-control-file" id="adhar_doc" name="adhar_doc" required>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="pan_doc">PAN Document</label>
                <input type="file" class="form-control-file" id="pan_doc" name="pan_doc" required>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="bank_doc">Bank Document</label>
                <input type="file" class="form-control-file" id="bank_doc" name="bank_doc" required>
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="exp_doc">Experience Document</label>
                <input type="file" class="form-control-file" id="exp_doc" name="exp_doc" required>
            </div>
        </div>
    </div>
</div>

<!-- Branch Name Section -->
<div class="form-section">
    <h4 class="mt-4">Branch Name</h4>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label for="branchname">Select Branch</label>
                <select class="form-control" id="branchname" name="branchname" required>
                    <option value="">--Select Branch--</option>
                    {% for branch in branches %}
                        <option value="{{ branch.branchname }}">{{ branch.branchname }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>
</div>


<!-- Submit Button -->
<div class="row">
    <div class="col-12 text-center mt-4">
        <button type="submit" class="btn btn-primary">Register Employee</button>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    $(document).ready(function() {
    // Function to check if contact number already exists
    $('#contact').on('blur', function() {
        var contactNumber = $(this).val();  // Get the contact number entered by the user

        // Clear previous error message
        $('#contactError').hide();
        $('#submitBtn').prop('disabled', false);  // Enable the submit button

        // If the contact field is empty, don't proceed
        if (contactNumber === "") return;

        // AJAX call to check if the contact number already exists
        $.ajax({
            url: '/check_contact',  // URL to your server endpoint to check the contact number
            method: 'GET',  // You can use POST as well
            data: { contact: contactNumber },
            success: function(response) {
                if (response.exists) {
                    // If contact number exists, show error message
                    $('#contactError').show();
                    $('#submitBtn').prop('disabled', true);  // Disable the submit button
                }
            },
            error: function() {
                // Handle any AJAX error here
                alert("Error checking contact number");
            }
        });
    });

    // Prevent form submission if there's an error with the contact field
    $('form').on('submit', function(e) {
        if ($('#contactError').is(':visible')) {
            e.preventDefault();  // Prevent form submission
            alert('Please correct the errors in the form before submitting.');
        }
    });
});

</script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
